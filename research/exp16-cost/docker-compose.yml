services:
  condition-a:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        INCLUDE_FMM_SKILL: "false"
    image: exp16-cost-condition-a
    volumes:
      - ${CODEBASE_PATH:-.}:/codebase:ro
    environment:
      - ANTHROPIC_API_KEY
      - CONDITION=A
      - TASK_PROMPT
      - TASK_ID
    tmpfs:
      - /root/.claude
    network_mode: bridge

  condition-b:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        INCLUDE_FMM_SKILL: "true"
    image: exp16-cost-condition-b
    volumes:
      - ${CODEBASE_PATH:-.}:/codebase:ro
    environment:
      - ANTHROPIC_API_KEY
      - CONDITION=B
      - TASK_PROMPT
      - TASK_ID
    tmpfs:
      - /root/.claude
    network_mode: bridge
